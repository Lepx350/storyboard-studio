<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Cinema Studio</title>
<link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;500;700&family=Inter:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">
<style>
:root {
  --bg: #08080c;
  --s1: #0e0e14;
  --s2: #14141e;
  --s3: #1a1a28;
  --border: #252535;
  --border2: #353545;
  --text: #e8e8f0;
  --text2: #7878a0;
  --text3: #4a4a6a;
  --red: #ff2d55;
  --blue: #0a84ff;
  --purple: #bf5af2;
  --green: #30d158;
  --orange: #ff9f0a;
  --cyan: #64d2ff;
  --yellow: #ffd60a;
}

* { margin: 0; padding: 0; box-sizing: border-box; }

body {
  background: var(--bg);
  color: var(--text);
  font-family: 'Inter', -apple-system, sans-serif;
  min-height: 100vh;
  overflow-x: hidden;
}

/* HEADER */
.header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 16px 24px;
  border-bottom: 1px solid var(--border);
  background: rgba(8,8,12,0.9);
  backdrop-filter: blur(20px);
  position: sticky;
  top: 0;
  z-index: 100;
}
.logo {
  display: flex;
  align-items: center;
  gap: 10px;
}
.logo-icon {
  width: 32px;
  height: 32px;
  background: linear-gradient(135deg, var(--red), var(--purple));
  border-radius: 8px;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 16px;
}
.logo-text {
  font-size: 18px;
  font-weight: 800;
  letter-spacing: -0.5px;
}
.logo-text span { color: var(--red); }
.logo-ver {
  font-size: 10px;
  color: var(--text3);
  letter-spacing: 2px;
  font-weight: 600;
}
.header-actions {
  display: flex;
  gap: 8px;
}
.header-btn {
  padding: 8px 16px;
  border-radius: 8px;
  border: 1px solid var(--border);
  background: var(--s2);
  color: var(--text2);
  font-size: 12px;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.2s;
  font-family: inherit;
}
.header-btn:hover { border-color: var(--border2); color: var(--text); }
.header-btn.primary {
  background: var(--red);
  border-color: var(--red);
  color: #fff;
}
.header-btn.primary:hover { filter: brightness(1.15); }

/* LAYOUT */
.layout {
  display: grid;
  grid-template-columns: 320px 1fr 340px;
  min-height: calc(100vh - 65px);
}

/* PANELS */
.panel {
  border-right: 1px solid var(--border);
  overflow-y: auto;
  padding: 0;
}
.panel:last-child { border-right: none; }
.panel-section {
  padding: 16px 20px;
  border-bottom: 1px solid var(--border);
}
.panel-title {
  font-size: 10px;
  letter-spacing: 2.5px;
  text-transform: uppercase;
  color: var(--text3);
  font-weight: 700;
  margin-bottom: 14px;
  display: flex;
  align-items: center;
  gap: 6px;
}
.panel-title .dot {
  width: 6px;
  height: 6px;
  border-radius: 50%;
  background: var(--red);
}

/* SCENE INPUT */
.scene-input {
  width: 100%;
  background: var(--s1);
  border: 1px solid var(--border);
  border-radius: 10px;
  padding: 14px 16px;
  color: var(--text);
  font-size: 14px;
  font-family: inherit;
  line-height: 1.6;
  resize: vertical;
  min-height: 120px;
  transition: border-color 0.2s;
}
.scene-input:focus {
  outline: none;
  border-color: var(--red);
  box-shadow: 0 0 0 3px rgba(255,45,85,0.1);
}
.scene-input::placeholder { color: var(--text3); }

/* SELECTOR GRID */
.sel-grid {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 6px;
}
.sel-grid.three { grid-template-columns: 1fr 1fr 1fr; }
.sel-item {
  padding: 10px 8px;
  border-radius: 8px;
  border: 1px solid var(--border);
  background: var(--s1);
  text-align: center;
  cursor: pointer;
  transition: all 0.15s;
  font-size: 11px;
  font-weight: 600;
  color: var(--text2);
  user-select: none;
}
.sel-item:hover { border-color: var(--border2); color: var(--text); }
.sel-item.active {
  border-color: var(--red);
  background: rgba(255,45,85,0.08);
  color: var(--red);
  box-shadow: 0 0 0 1px rgba(255,45,85,0.2);
}
.sel-item .icon {
  font-size: 18px;
  display: block;
  margin-bottom: 4px;
}
.sel-item .label {
  font-size: 10px;
  display: block;
  color: var(--text3);
  margin-top: 2px;
  font-weight: 400;
}

/* SLIDER */
.slider-row {
  display: flex;
  align-items: center;
  gap: 12px;
  margin-bottom: 14px;
}
.slider-label {
  font-size: 11px;
  color: var(--text2);
  font-weight: 600;
  min-width: 70px;
}
.slider-wrap {
  flex: 1;
  position: relative;
}
input[type="range"] {
  width: 100%;
  height: 4px;
  -webkit-appearance: none;
  appearance: none;
  background: var(--s3);
  border-radius: 2px;
  outline: none;
}
input[type="range"]::-webkit-slider-thumb {
  -webkit-appearance: none;
  width: 16px;
  height: 16px;
  border-radius: 50%;
  background: var(--red);
  cursor: pointer;
  box-shadow: 0 0 8px rgba(255,45,85,0.4);
}
.slider-val {
  font-family: 'JetBrains Mono', monospace;
  font-size: 12px;
  color: var(--cyan);
  font-weight: 700;
  min-width: 45px;
  text-align: right;
}

/* DROPDOWN */
.dropdown {
  width: 100%;
  padding: 10px 14px;
  background: var(--s1);
  border: 1px solid var(--border);
  border-radius: 8px;
  color: var(--text);
  font-size: 13px;
  font-family: inherit;
  font-weight: 500;
  cursor: pointer;
  -webkit-appearance: none;
  appearance: none;
  background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' fill='%237878a0'%3E%3Cpath d='M6 8.5L1 3.5h10z'/%3E%3C/svg%3E");
  background-repeat: no-repeat;
  background-position: right 12px center;
  margin-bottom: 10px;
}
.dropdown:focus { outline: none; border-color: var(--red); }

/* CENTER - PREVIEW */
.center {
  display: flex;
  flex-direction: column;
  background: var(--bg);
}
.preview-area {
  flex: 1;
  display: flex;
  align-items: center;
  justify-content: center;
  position: relative;
  overflow: hidden;
}
.preview-frame {
  width: 90%;
  max-width: 680px;
  aspect-ratio: 16/9;
  background: var(--s1);
  border-radius: 12px;
  border: 1px solid var(--border);
  display: flex;
  align-items: center;
  justify-content: center;
  position: relative;
  overflow: hidden;
}
.preview-frame img {
  width: 100%;
  height: 100%;
  object-fit: cover;
  border-radius: 11px;
}
.preview-empty {
  text-align: center;
  color: var(--text3);
}
.preview-empty .cam-icon {
  font-size: 48px;
  margin-bottom: 12px;
  opacity: 0.3;
}
.preview-empty p {
  font-size: 13px;
  font-weight: 500;
}

/* GRID OVERLAY */
.grid-overlay {
  position: absolute;
  inset: 0;
  pointer-events: none;
  opacity: 0.15;
}
.grid-overlay.active { opacity: 0.3; }
.grid-overlay .v-line {
  position: absolute;
  top: 0;
  bottom: 0;
  width: 1px;
  background: var(--cyan);
}
.grid-overlay .h-line {
  position: absolute;
  left: 0;
  right: 0;
  height: 1px;
  background: var(--cyan);
}

/* CAMERA INFO BAR */
.cam-info {
  display: flex;
  justify-content: center;
  gap: 24px;
  padding: 12px 20px;
  border-top: 1px solid var(--border);
  background: var(--s1);
}
.cam-tag {
  font-family: 'JetBrains Mono', monospace;
  font-size: 11px;
  color: var(--text3);
  font-weight: 500;
}
.cam-tag span { color: var(--cyan); font-weight: 700; }

/* RIGHT PANEL - PROMPT OUTPUT */
.prompt-output {
  background: var(--s1);
  border: 1px solid var(--border);
  border-radius: 10px;
  padding: 16px;
  font-family: 'JetBrains Mono', monospace;
  font-size: 12px;
  line-height: 1.8;
  color: var(--text);
  min-height: 200px;
  max-height: 400px;
  overflow-y: auto;
  word-break: break-word;
  position: relative;
}
.prompt-output .tag {
  color: var(--cyan);
  font-weight: 700;
}
.prompt-output .val { color: var(--orange); }
.prompt-output .scene-text { color: var(--green); }

/* ACTION BUTTONS */
.action-row {
  display: flex;
  gap: 8px;
  margin-top: 12px;
}
.action-btn {
  flex: 1;
  padding: 12px;
  border-radius: 8px;
  border: none;
  font-size: 12px;
  font-weight: 700;
  cursor: pointer;
  font-family: inherit;
  transition: all 0.15s;
  letter-spacing: 0.3px;
}
.action-btn.copy {
  background: var(--s2);
  border: 1px solid var(--border);
  color: var(--text2);
}
.action-btn.copy:hover { border-color: var(--cyan); color: var(--cyan); }
.action-btn.generate {
  background: linear-gradient(135deg, var(--red), #cc1144);
  color: #fff;
  box-shadow: 0 4px 16px rgba(255,45,85,0.3);
}
.action-btn.generate:hover { filter: brightness(1.1); transform: translateY(-1px); }

/* PRESETS ROW */
.presets-row {
  display: flex;
  gap: 6px;
  flex-wrap: wrap;
}
.preset-chip {
  padding: 6px 12px;
  border-radius: 20px;
  border: 1px solid var(--border);
  background: var(--s1);
  font-size: 11px;
  color: var(--text2);
  cursor: pointer;
  transition: all 0.15s;
  font-weight: 500;
}
.preset-chip:hover { border-color: var(--purple); color: var(--purple); }
.preset-chip.active { border-color: var(--purple); background: rgba(191,90,242,0.1); color: var(--purple); }

/* TOAST */
.toast {
  position: fixed;
  bottom: 24px;
  left: 50%;
  transform: translateX(-50%) translateY(100px);
  background: var(--green);
  color: #000;
  padding: 12px 24px;
  border-radius: 10px;
  font-size: 13px;
  font-weight: 700;
  z-index: 999;
  transition: transform 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
  pointer-events: none;
}
.toast.show { transform: translateX(-50%) translateY(0); }

/* CHARACTER REFS */
.char-slots {
  display: flex;
  gap: 8px;
}
.char-slot {
  width: 56px;
  height: 56px;
  border-radius: 10px;
  border: 2px dashed var(--border);
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  transition: all 0.15s;
  font-size: 20px;
  color: var(--text3);
  position: relative;
  overflow: hidden;
  flex-shrink: 0;
}
.char-slot:hover { border-color: var(--red); }
.char-slot.filled {
  border-style: solid;
  border-color: var(--red);
}
.char-slot img {
  width: 100%;
  height: 100%;
  object-fit: cover;
}
.char-slot .remove {
  position: absolute;
  top: -4px;
  right: -4px;
  width: 16px;
  height: 16px;
  background: var(--red);
  border-radius: 50%;
  font-size: 10px;
  display: flex;
  align-items: center;
  justify-content: center;
  color: #fff;
  cursor: pointer;
}

/* RESPONSIVE */
@media (max-width: 1100px) {
  .layout { grid-template-columns: 280px 1fr 300px; }
}
@media (max-width: 900px) {
  .layout { grid-template-columns: 1fr; }
  .panel { border-right: none; border-bottom: 1px solid var(--border); }
  .preview-frame { width: 95%; }
}

/* SCROLLBAR */
.panel::-webkit-scrollbar { width: 4px; }
.panel::-webkit-scrollbar-track { background: transparent; }
.panel::-webkit-scrollbar-thumb { background: var(--border); border-radius: 2px; }
</style>
</head>
<body>

<div class="header">
  <div class="logo">
    <div class="logo-icon">üé•</div>
    <div>
      <div class="logo-text">Cinema <span>Studio</span></div>
      <div class="logo-ver">IMAGE DIRECTOR v1.0</div>
    </div>
  </div>
  <div class="header-actions">
    <button class="header-btn" onclick="resetAll()">Reset</button>
    <button class="header-btn" onclick="toggleGrid()">Grid</button>
    <button class="header-btn primary" onclick="buildAndCopy()">‚åò Build Prompt</button>
  </div>
</div>

<div class="layout">

  <!-- LEFT PANEL: CAMERA + SCENE -->
  <div class="panel" id="leftPanel">

    <div class="panel-section">
      <div class="panel-title"><span class="dot"></span> SCENE DESCRIPTION</div>
      <textarea class="scene-input" id="sceneDesc" placeholder="Describe your scene... e.g. 'White faceless mannequin sitting at desk in dark room, holding phone, laptop glowing with data'"></textarea>
    </div>

    <div class="panel-section">
      <div class="panel-title"><span class="dot"></span> SHOT TYPE</div>
      <div class="sel-grid three" id="shotGrid">
        <div class="sel-item" data-val="Extreme close-up" onclick="selectIn(this,'shotGrid')"><span class="icon">üëÅ</span>ECU<span class="label">Eyes/Detail</span></div>
        <div class="sel-item active" data-val="Close-up" onclick="selectIn(this,'shotGrid')"><span class="icon">üòê</span>CU<span class="label">Face/Head</span></div>
        <div class="sel-item" data-val="Medium close-up" onclick="selectIn(this,'shotGrid')"><span class="icon">üë§</span>MCU<span class="label">Chest up</span></div>
        <div class="sel-item" data-val="Medium shot" onclick="selectIn(this,'shotGrid')"><span class="icon">üßç</span>MS<span class="label">Waist up</span></div>
        <div class="sel-item" data-val="Wide shot" onclick="selectIn(this,'shotGrid')"><span class="icon">üè†</span>WS<span class="label">Full body</span></div>
        <div class="sel-item" data-val="Extreme wide shot, establishing shot" onclick="selectIn(this,'shotGrid')"><span class="icon">üåÜ</span>EWS<span class="label">Landscape</span></div>
      </div>
    </div>

    <div class="panel-section">
      <div class="panel-title"><span class="dot"></span> CAMERA ANGLE</div>
      <div class="sel-grid three" id="angleGrid">
        <div class="sel-item" data-val="low angle, looking up" onclick="selectIn(this,'angleGrid')"><span class="icon">‚¨Ü</span>Low<span class="label">Power</span></div>
        <div class="sel-item active" data-val="eye level" onclick="selectIn(this,'angleGrid')"><span class="icon">‚û°</span>Eye<span class="label">Neutral</span></div>
        <div class="sel-item" data-val="high angle, looking down" onclick="selectIn(this,'angleGrid')"><span class="icon">‚¨á</span>High<span class="label">Vulnerable</span></div>
        <div class="sel-item" data-val="bird's eye view, top down" onclick="selectIn(this,'angleGrid')"><span class="icon">üîΩ</span>Bird<span class="label">Top down</span></div>
        <div class="sel-item" data-val="dutch angle, tilted" onclick="selectIn(this,'angleGrid')"><span class="icon">‚Üó</span>Dutch<span class="label">Tension</span></div>
        <div class="sel-item" data-val="over the shoulder" onclick="selectIn(this,'angleGrid')"><span class="icon">üëÄ</span>OTS<span class="label">POV</span></div>
      </div>
    </div>

    <div class="panel-section">
      <div class="panel-title"><span class="dot"></span> LENS & OPTICS</div>
      <div class="slider-row">
        <span class="slider-label">Focal Length</span>
        <div class="slider-wrap"><input type="range" id="focalLength" min="8" max="200" value="35" oninput="updateSlider(this)"></div>
        <span class="slider-val" id="focalVal">35mm</span>
      </div>
      <div class="slider-row">
        <span class="slider-label">Aperture</span>
        <div class="slider-wrap"><input type="range" id="aperture" min="1" max="22" value="2" step="0.1" oninput="updateAperture(this)"></div>
        <span class="slider-val" id="apertureVal">f/2.0</span>
      </div>
      <select class="dropdown" id="lensType">
        <option value="cinematic prime lens">Prime Lens</option>
        <option value="anamorphic lens, 2.39:1 aspect ratio, lens flare">Anamorphic</option>
        <option value="macro lens, extreme detail">Macro</option>
        <option value="tilt-shift lens, miniature effect">Tilt-Shift</option>
        <option value="vintage lens, soft focus, chromatic aberration">Vintage</option>
        <option value="fisheye lens, barrel distortion">Fisheye</option>
      </select>
      <select class="dropdown" id="sensorType">
        <option value="shot on ARRI Alexa 65">ARRI Alexa 65</option>
        <option value="shot on RED V-Raptor 8K">RED V-Raptor</option>
        <option value="shot on Sony Venice 2">Sony Venice 2</option>
        <option value="shot on Blackmagic URSA">Blackmagic URSA</option>
        <option value="shot on 35mm film">35mm Film</option>
        <option value="shot on IMAX 70mm">IMAX 70mm</option>
      </select>
    </div>

    <div class="panel-section">
      <div class="panel-title"><span class="dot"></span> DEPTH OF FIELD</div>
      <div class="sel-grid three" id="dofGrid">
        <div class="sel-item active" data-val="shallow depth of field, bokeh background" onclick="selectIn(this,'dofGrid')">Shallow<span class="label">Bokeh</span></div>
        <div class="sel-item" data-val="medium depth of field" onclick="selectIn(this,'dofGrid')">Medium<span class="label">Balanced</span></div>
        <div class="sel-item" data-val="deep focus, everything sharp" onclick="selectIn(this,'dofGrid')">Deep<span class="label">All sharp</span></div>
      </div>
    </div>
  </div>

  <!-- CENTER: PREVIEW -->
  <div class="center">
    <div class="preview-area">
      <div class="preview-frame" id="previewFrame">
        <div class="grid-overlay" id="gridOverlay">
          <div class="v-line" style="left:33.33%"></div>
          <div class="v-line" style="left:66.66%"></div>
          <div class="h-line" style="top:33.33%"></div>
          <div class="h-line" style="top:66.66%"></div>
        </div>
        <div class="preview-empty" id="previewEmpty">
          <div class="cam-icon">üé¨</div>
          <p>Configure your shot, then build the prompt</p>
          <p style="font-size:11px;margin-top:8px;color:#353545">Your cinematic prompt will appear on the right</p>
        </div>
      </div>
    </div>
    <div class="cam-info">
      <div class="cam-tag">LENS <span id="infoLens">35mm</span></div>
      <div class="cam-tag">APERTURE <span id="infoAperture">f/2.0</span></div>
      <div class="cam-tag">SENSOR <span id="infoSensor">ARRI</span></div>
      <div class="cam-tag">SHOT <span id="infoShot">CU</span></div>
      <div class="cam-tag">ANGLE <span id="infoAngle">Eye</span></div>
    </div>
  </div>

  <!-- RIGHT PANEL: STYLE + OUTPUT -->
  <div class="panel" id="rightPanel">

    <div class="panel-section">
      <div class="panel-title"><span class="dot"></span> LIGHTING</div>
      <div class="sel-grid" id="lightGrid">
        <div class="sel-item active" data-val="volumetric lighting, god rays, atmospheric haze" onclick="selectIn(this,'lightGrid')"><span class="icon">üå´</span>Volumetric<span class="label">God rays</span></div>
        <div class="sel-item" data-val="three-point lighting, key light, fill light, rim light" onclick="selectIn(this,'lightGrid')"><span class="icon">üí°</span>3-Point<span class="label">Classic</span></div>
        <div class="sel-item" data-val="dramatic rim lighting, strong backlight, silhouette edges" onclick="selectIn(this,'lightGrid')"><span class="icon">üåÖ</span>Rim Light<span class="label">Edge glow</span></div>
        <div class="sel-item" data-val="harsh overhead fluorescent lighting, cold institutional" onclick="selectIn(this,'lightGrid')"><span class="icon">üè¢</span>Fluorescent<span class="label">Institutional</span></div>
        <div class="sel-item" data-val="single practical light source, desk lamp, warm spotlight" onclick="selectIn(this,'lightGrid')"><span class="icon">üî¶</span>Practical<span class="label">Single source</span></div>
        <div class="sel-item" data-val="neon lighting, cyberpunk, colored light reflections" onclick="selectIn(this,'lightGrid')"><span class="icon">üíú</span>Neon<span class="label">Cyberpunk</span></div>
        <div class="sel-item" data-val="natural soft window light, golden hour" onclick="selectIn(this,'lightGrid')"><span class="icon">ü™ü</span>Window<span class="label">Natural</span></div>
        <div class="sel-item" data-val="low key lighting, heavy shadows, film noir, dark" onclick="selectIn(this,'lightGrid')"><span class="icon">üåë</span>Low Key<span class="label">Noir</span></div>
      </div>
    </div>

    <div class="panel-section">
      <div class="panel-title"><span class="dot"></span> RENDER STYLE</div>
      <div class="sel-grid" id="styleGrid">
        <div class="sel-item active" data-val="3D render, Cinema 4D, Octane render" onclick="selectIn(this,'styleGrid')"><span class="icon">üßä</span>3D Render<span class="label">C4D/Octane</span></div>
        <div class="sel-item" data-val="3D render, Blender, realistic materials" onclick="selectIn(this,'styleGrid')"><span class="icon">üé®</span>Blender<span class="label">Realistic</span></div>
        <div class="sel-item" data-val="photorealistic, hyperrealistic photography" onclick="selectIn(this,'styleGrid')"><span class="icon">üì∑</span>Photo Real<span class="label">Hyper real</span></div>
        <div class="sel-item" data-val="Unreal Engine 5, ray tracing, photogrammetry" onclick="selectIn(this,'styleGrid')"><span class="icon">üéÆ</span>UE5<span class="label">Game engine</span></div>
      </div>
    </div>

    <div class="panel-section">
      <div class="panel-title"><span class="dot"></span> COLOR GRADE</div>
      <div class="sel-grid three" id="colorGrid">
        <div class="sel-item active" data-val="desaturated, teal and orange color grade, cinematic" onclick="selectIn(this,'colorGrid')">Teal/Orange</div>
        <div class="sel-item" data-val="cold blue tones, desaturated, clinical" onclick="selectIn(this,'colorGrid')">Cold Blue</div>
        <div class="sel-item" data-val="warm golden tones, amber highlights" onclick="selectIn(this,'colorGrid')">Warm Gold</div>
        <div class="sel-item" data-val="high contrast black and white, monochrome" onclick="selectIn(this,'colorGrid')">B&W</div>
        <div class="sel-item" data-val="neon color palette, saturated, vivid" onclick="selectIn(this,'colorGrid')">Neon</div>
        <div class="sel-item" data-val="muted earth tones, film grain, vintage" onclick="selectIn(this,'colorGrid')">Vintage</div>
      </div>
    </div>

    <div class="panel-section">
      <div class="panel-title"><span class="dot"></span> MOOD / GENRE</div>
      <div class="presets-row" id="moodRow">
        <span class="preset-chip active" data-val="suspenseful, tension" onclick="toggleChip(this)">Suspense</span>
        <span class="preset-chip" data-val="documentary, journalistic" onclick="toggleChip(this)">Documentary</span>
        <span class="preset-chip" data-val="horror, unsettling, dread" onclick="toggleChip(this)">Horror</span>
        <span class="preset-chip" data-val="dramatic, emotional" onclick="toggleChip(this)">Drama</span>
        <span class="preset-chip" data-val="action, dynamic, intense" onclick="toggleChip(this)">Action</span>
        <span class="preset-chip" data-val="melancholic, somber, reflective" onclick="toggleChip(this)">Melancholy</span>
        <span class="preset-chip" data-val="mysterious, enigmatic, unknown" onclick="toggleChip(this)">Mystery</span>
        <span class="preset-chip" data-val="clinical, sterile, institutional" onclick="toggleChip(this)">Clinical</span>
      </div>
    </div>

    <div class="panel-section">
      <div class="panel-title"><span class="dot"></span> QUALITY TAGS</div>
      <div class="presets-row" id="qualityRow">
        <span class="preset-chip active" data-val="4K" onclick="toggleChip(this)">4K</span>
        <span class="preset-chip active" data-val="photorealistic lighting" onclick="toggleChip(this)">Photo Light</span>
        <span class="preset-chip" data-val="8K UHD" onclick="toggleChip(this)">8K</span>
        <span class="preset-chip" data-val="HDR" onclick="toggleChip(this)">HDR</span>
        <span class="preset-chip active" data-val="cinematic composition" onclick="toggleChip(this)">Cinematic</span>
        <span class="preset-chip" data-val="award-winning photography" onclick="toggleChip(this)">Award</span>
        <span class="preset-chip" data-val="film grain, 35mm texture" onclick="toggleChip(this)">Film Grain</span>
        <span class="preset-chip" data-val="Ray tracing" onclick="toggleChip(this)">Ray Trace</span>
      </div>
    </div>

    <div class="panel-section">
      <div class="panel-title"><span class="dot"></span> BUILT PROMPT</div>
      <div class="prompt-output" id="promptOutput">
        <span style="color:var(--text3);font-style:italic">Configure settings and click "Build Prompt" to generate your cinematic prompt...</span>
      </div>
      <div class="action-row">
        <button class="action-btn copy" onclick="copyPrompt()">üìã Copy</button>
        <button class="action-btn generate" onclick="buildAndCopy()">‚ö° Build Prompt</button>
      </div>
    </div>

    <div class="panel-section">
      <div class="panel-title"><span class="dot"></span> SCENE PRESETS</div>
      <div class="presets-row">
        <span class="preset-chip" onclick="loadPreset('bedroom')">üõè Dark Bedroom</span>
        <span class="preset-chip" onclick="loadPreset('office')">üè¢ Call Center</span>
        <span class="preset-chip" onclick="loadPreset('hacker')">üíª Hacker Room</span>
        <span class="preset-chip" onclick="loadPreset('court')">‚öñ Courtroom</span>
        <span class="preset-chip" onclick="loadPreset('fbi')">üîç FBI Raid</span>
        <span class="preset-chip" onclick="loadPreset('teen')">üéÆ Teen Bedroom</span>
        <span class="preset-chip" onclick="loadPreset('store')">üì± Phone Store</span>
        <span class="preset-chip" onclick="loadPreset('defeat')">üòî Defeat</span>
      </div>
    </div>

  </div>
</div>

<div class="toast" id="toast">Prompt copied to clipboard!</div>

<script>
// ‚îÄ‚îÄ Selection Logic ‚îÄ‚îÄ
function selectIn(el, gridId) {
  document.querySelectorAll(`#${gridId} .sel-item`).forEach(i => i.classList.remove('active'));
  el.classList.add('active');
  updateInfoBar();
}

function toggleChip(el) {
  el.classList.toggle('active');
}

function getActive(gridId) {
  const a = document.querySelector(`#${gridId} .sel-item.active`);
  return a ? a.dataset.val : '';
}

function getActiveChips(rowId) {
  return Array.from(document.querySelectorAll(`#${rowId} .preset-chip.active`)).map(c => c.dataset.val);
}

// ‚îÄ‚îÄ Sliders ‚îÄ‚îÄ
function updateSlider(el) {
  document.getElementById('focalVal').textContent = el.value + 'mm';
  document.getElementById('infoLens').textContent = el.value + 'mm';
}

function updateAperture(el) {
  const v = parseFloat(el.value).toFixed(1);
  document.getElementById('apertureVal').textContent = 'f/' + v;
  document.getElementById('infoAperture').textContent = 'f/' + v;
}

// ‚îÄ‚îÄ Info Bar ‚îÄ‚îÄ
function updateInfoBar() {
  const shot = getActive('shotGrid');
  const angle = getActive('angleGrid');
  document.getElementById('infoShot').textContent = shot.split(',')[0].replace('Extreme ','E').replace('close-up','CU').replace('Close-up','CU').replace('Medium close-up','MCU').replace('Medium shot','MS').replace('Wide shot','WS').replace('shot','').trim() || 'CU';
  document.getElementById('infoAngle').textContent = angle.split(',')[0].replace(' angle','').replace('eye level','Eye').replace('low','Low').replace('high','High').trim() || 'Eye';
  const sensor = document.getElementById('sensorType').value;
  document.getElementById('infoSensor').textContent = sensor.replace('shot on ','').split(' ')[0];
}

// ‚îÄ‚îÄ Grid Toggle ‚îÄ‚îÄ
let gridOn = false;
function toggleGrid() {
  gridOn = !gridOn;
  document.getElementById('gridOverlay').classList.toggle('active', gridOn);
}

// ‚îÄ‚îÄ Build Prompt ‚îÄ‚îÄ
function buildPrompt() {
  const scene = document.getElementById('sceneDesc').value.trim();
  const shot = getActive('shotGrid');
  const angle = getActive('angleGrid');
  const focal = document.getElementById('focalLength').value;
  const aperture = parseFloat(document.getElementById('aperture').value).toFixed(1);
  const lens = document.getElementById('lensType').value;
  const sensor = document.getElementById('sensorType').value;
  const dof = getActive('dofGrid');
  const light = getActive('lightGrid');
  const style = getActive('styleGrid');
  const color = getActive('colorGrid');
  const moods = getActiveChips('moodRow');
  const quality = getActiveChips('qualityRow');

  const parts = [];

  // Style first
  if (style) parts.push(style);

  // Scene
  if (scene) {
    parts.push(scene);
  } else {
    parts.push('[describe your scene here]');
  }

  // Shot + Angle
  if (shot) parts.push(shot);
  if (angle) parts.push(angle);

  // Lens
  parts.push(`${focal}mm focal length`);
  parts.push(`f/${aperture}`);
  if (lens) parts.push(lens);

  // Sensor
  if (sensor) parts.push(sensor);

  // DOF
  if (dof) parts.push(dof);

  // Lighting
  if (light) parts.push(light);

  // Color
  if (color) parts.push(color);

  // Mood
  if (moods.length) parts.push(moods.join(', '));

  // Quality
  if (quality.length) parts.push(quality.join(', '));

  return parts.join(', ');
}

function buildAndCopy() {
  const prompt = buildPrompt();
  const output = document.getElementById('promptOutput');

  // Colorized display
  const scene = document.getElementById('sceneDesc').value.trim();
  let html = prompt;

  // Highlight scene text
  if (scene) {
    html = html.replace(scene, `<span class="scene-text">${scene}</span>`);
  }

  // Highlight technical terms
  const techTerms = ['3D render', 'Cinema 4D', 'Octane render', 'Blender', 'Unreal Engine 5', 'ray tracing', 'ARRI Alexa 65', 'RED V-Raptor', 'Sony Venice 2', 'Blackmagic URSA', '35mm film', 'IMAX 70mm', '4K', '8K UHD', 'HDR', 'photorealistic', 'anamorphic', 'bokeh'];
  techTerms.forEach(term => {
    const regex = new RegExp(`(${term.replace(/[.*+?^${}()|[\]\\]/g, '\\$&')})`, 'gi');
    html = html.replace(regex, '<span class="tag">$1</span>');
  });

  // Highlight values
  const valTerms = ['f/[0-9.]+', '[0-9]+mm focal length', 'shallow depth', 'deep focus', 'medium depth'];
  valTerms.forEach(pattern => {
    const regex = new RegExp(`(${pattern})`, 'gi');
    html = html.replace(regex, '<span class="val">$1</span>');
  });

  output.innerHTML = html;
}

function copyPrompt() {
  const prompt = buildPrompt();
  navigator.clipboard.writeText(prompt).then(() => {
    const toast = document.getElementById('toast');
    toast.classList.add('show');
    setTimeout(() => toast.classList.remove('show'), 2000);
  });
}

// ‚îÄ‚îÄ Scene Presets ‚îÄ‚îÄ
const presets = {
  bedroom: { scene: "white faceless mannequin figure lying asleep in dark bedroom, smartphone on wooden nightstand glowing bright blue, minimal furniture", shot: 1, angle: 1, light: 0, mood: [0], focal: 35, aperture: 1.8 },
  office: { scene: "white faceless mannequin figure in office cubicle wearing headset, slightly slumped tired posture, multiple monitors showing customer database, gray cubicle walls", shot: 3, angle: 1, light: 3, mood: [7], focal: 50, aperture: 4 },
  hacker: { scene: "white faceless mannequin figure sitting at desk in dark room, laptop screen showing dark web marketplace with green text, single desk lamp warm spotlight", shot: 2, angle: 1, light: 4, mood: [0, 6], focal: 35, aperture: 2 },
  court: { scene: "courtroom interior, white faceless mannequin in business suit at plaintiff table, mannequin judge elevated on bench, large screen showing corporate logo, wood paneling", shot: 4, angle: 1, light: 3, mood: [3], focal: 24, aperture: 5.6 },
  fbi: { scene: "two white faceless mannequins in dark suits approaching suburban house front door, early dawn light, one reaching toward doorbell, wet driveway", shot: 4, angle: 2, light: 6, mood: [0, 4], focal: 24, aperture: 4 },
  teen: { scene: "white faceless mannequin teenager in messy bedroom at gaming PC, RGB keyboard lighting, energy drinks and textbooks scattered, computer screens showing cryptocurrency wallet with millions, school backpack on floor", shot: 3, angle: 1, light: 5, mood: [0, 6], focal: 28, aperture: 2.8 },
  store: { scene: "interior of mobile phone retail store, white faceless mannequin standing behind service counter in retail polo shirt, bright fluorescent overhead lighting, phone display cases in background", shot: 3, angle: 1, light: 3, mood: [7], focal: 35, aperture: 4 },
  defeat: { scene: "white faceless mannequin figure sitting on edge of bed in morning sunlight, head down in defeated posture, smartphone lying face-down on floor, empty feeling, melancholic morning light through curtains", shot: 3, angle: 2, light: 6, mood: [5], focal: 50, aperture: 2 },
};

function loadPreset(key) {
  const p = presets[key];
  document.getElementById('sceneDesc').value = p.scene;

  // Shot
  const shots = document.querySelectorAll('#shotGrid .sel-item');
  shots.forEach((s,i) => s.classList.toggle('active', i === p.shot));

  // Angle
  const angles = document.querySelectorAll('#angleGrid .sel-item');
  angles.forEach((a,i) => a.classList.toggle('active', i === p.angle));

  // Light
  const lights = document.querySelectorAll('#lightGrid .sel-item');
  lights.forEach((l,i) => l.classList.toggle('active', i === p.light));

  // Mood
  const moods = document.querySelectorAll('#moodRow .preset-chip');
  moods.forEach((m,i) => m.classList.toggle('active', p.mood.includes(i)));

  // Focal + Aperture
  document.getElementById('focalLength').value = p.focal;
  document.getElementById('focalVal').textContent = p.focal + 'mm';
  document.getElementById('aperture').value = p.aperture;
  document.getElementById('apertureVal').textContent = 'f/' + p.aperture.toFixed(1);

  updateInfoBar();
  buildAndCopy();
}

function resetAll() {
  document.getElementById('sceneDesc').value = '';
  document.getElementById('focalLength').value = 35;
  document.getElementById('focalVal').textContent = '35mm';
  document.getElementById('aperture').value = 2;
  document.getElementById('apertureVal').textContent = 'f/2.0';
  document.getElementById('lensType').selectedIndex = 0;
  document.getElementById('sensorType').selectedIndex = 0;

  document.querySelectorAll('.sel-item').forEach((s,i) => {
    const grid = s.parentElement.id;
    s.classList.remove('active');
  });
  // Reset defaults
  document.querySelector('#shotGrid .sel-item:nth-child(2)').classList.add('active');
  document.querySelector('#angleGrid .sel-item:nth-child(2)').classList.add('active');
  document.querySelector('#dofGrid .sel-item:nth-child(1)').classList.add('active');
  document.querySelector('#lightGrid .sel-item:nth-child(1)').classList.add('active');
  document.querySelector('#styleGrid .sel-item:nth-child(1)').classList.add('active');
  document.querySelector('#colorGrid .sel-item:nth-child(1)').classList.add('active');

  document.querySelectorAll('.preset-chip').forEach(c => c.classList.remove('active'));
  document.querySelector('#moodRow .preset-chip:nth-child(1)').classList.add('active');
  document.querySelector('#qualityRow .preset-chip:nth-child(1)').classList.add('active');
  document.querySelector('#qualityRow .preset-chip:nth-child(2)').classList.add('active');
  document.querySelector('#qualityRow .preset-chip:nth-child(5)').classList.add('active');

  document.getElementById('promptOutput').innerHTML = '<span style="color:var(--text3);font-style:italic">Configure settings and click "Build Prompt"...</span>';
  updateInfoBar();
}

// ‚îÄ‚îÄ Init ‚îÄ‚îÄ
document.getElementById('sensorType').addEventListener('change', updateInfoBar);
document.getElementById('lensType').addEventListener('change', updateInfoBar);
updateInfoBar();
</script>

</body>
</html>
